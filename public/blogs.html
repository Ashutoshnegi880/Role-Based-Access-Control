<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Blogs</title>
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <div class="navbar">
    <h1>Blog Platform</h1>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <h2>Blog Posts</h2>
  <div id="blogs"></div>

  <script>
    async function fetchBlogs() {
      const res = await fetch('/api/blogs', {
        headers: { 'Authorization': 'Bearer ' + localStorage.getItem('token') }
      });
      const blogs = await res.json();
      const container = document.getElementById('blogs');
      container.innerHTML = blogs.map(b => `
        <div><h3>${b.title}</h3><p>${b.content}</p><small>By: ${b.author}</small></div><hr>
      `).join('');
    }

    function logout() {
      localStorage.removeItem('token');
      window.location.href = 'login.html';
    }

    fetchBlogs();
  </script>
</body>

</html>